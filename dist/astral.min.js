!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Astral=e():t.Astral=e()}(self,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{context:()=>r,default:()=>o,event:()=>n,layout:()=>i});const n=function(){const t={};let e=!1;function n(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function i(t){e&&console.debug("Astral.event $:",t)}return{subscribe:function(e,n){Array.isArray(t[e])||(t[e]=[],i("Event: "+e+" subcribers list initialized")),-1===t[e].indexOf(n)&&(t[e].push(n),i("Event: "+e))},publish:function(e,n){Array.isArray(t[e])?t[e].forEach((function(t){t(n),i("Event: "+e+"\nData: "+JSON.stringify(n))})):i("Event: "+e+"\nData: "+JSON.stringify(n)+"\nAction: No subscribers found")},unsubscribe:function(e,r){if(Array.isArray(t[e])){for(var o=0;o<t[e].length;o++)t[e][o]===r&&n(t[e],r);i("Event: "+e)}else i("Event: "+e+" | No subscribers found to unsubscribe")},unsubscribeAll:function(e){if(Array.isArray(t[e])){for(var r=0;r<t[e].length;r++)n(t[e],t[e][r]);i("Event: "+e+"\nAction: All callbacks removed (unsubscribed)")}else{for(var o in t)n(t[o],t[o]);i("Removed all subscriptions because no event name was given to unsubscribeAll function")}},setDebugMode:function(t){e=t,i("Debug mode set to: "+t)}}}(),i=function(){const t={ExtraLarge:"ExtraLarge",Large:"Large",Medium:"Medium",Small:"Small",ExtraSmall:"ExtraSmall",Other:"Other"};let e={breakpoints:{[t.ExtraLarge]:{minWidth:1920,maxWidth:1/0,minHeight:840},[t.Large]:{minWidth:1280,maxWidth:1920,minHeight:646},[t.Medium]:{minWidth:960,maxWidth:1280,minHeight:380},[t.Small]:{minWidth:600,maxWidth:960,minHeight:0},[t.ExtraSmall]:{minWidth:0,maxWidth:600,minHeight:0},[t.Other]:{minWidth:600,maxWidth:1/0,minHeight:0}}},i=t;const r="astralInternalScreenResizeEvent",o="astralInternalOrientationChangeEvent";let a=!1;function c(){n.publish(r,d(s()))}function u(){const t=f();n.publish(o,t)}function s(){return{WIDTH:window.innerWidth,HEIGHT:window.innerHeight}}function l(t){const n=e.breakpoints[t];if(n)return n;throw new Error("Astral.layout: No breakpoint found for label: "+t)}function d(t){for(const n in e.breakpoints){const i=e.breakpoints[n];if(t.WIDTH>=i.minWidth&&t.WIDTH<=i.maxWidth&&t.HEIGHT>=i.minHeight)return i}throw new Error("Astral.layout: No breakpoint found for screen size: "+t.WIDTH+"x"+t.HEIGHT)}function f(){try{return window.screen.orientation.type}catch(t){if(window.matchMedia)return window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape";throw new Error("Astral.layout: No orientation found",t)}}return function(){if(window.addEventListener("resize",c),window.screen&&window.screen.orientation)window.screen.orientation.addEventListener("change",(function(){u()}));else if(window.matchMedia){const t=window.matchMedia("(orientation: portrait)");u(),t.addListener((function(){u()}))}}(),{config:function(t){if(!t||!t.breakpoints)throw new Error("Astral.layout: Invalid configuration");e=t,i=Object.keys(e.breakpoints).reduce(((t,e)=>(t[e]=e,t)),{})},getWindowSize:s,getOrientation:f,getBreakpoint:d,getBreakpointFromLabel:l,applyIf:function(t,e,i,d){if(!i||0===i.length||!t)throw new Error("Astral.layout: No conditions or callbackSuccess provided");function f(){let n=!1;for(let t=0;t<i.length;t++){let e=i[t],o=!1;if("object"==typeof e){const t=l(e.breakpoint),n=s();switch(e.selector){case"<=":n.WIDTH<=t.maxWidth&&(o=!0);break;case">=":n.WIDTH>=t.minWidth&&(o=!0);break;case"<":n.WIDTH<t.maxWidth&&(o=!0);break;case">":n.WIDTH>t.minWidth&&(o=!0);break;default:n.WIDTH>=t.minWidth&&n.WIDTH<=t.maxWidth&&n.HEIGHT>=t.minHeight&&(o=!0)}}if("function"==typeof e&&(o=e.call()),r=`Condition ${t} matched: ${o}`,a&&console.debug(`Astral.layout $: ${r}`),o&&(n=!0),n&&d&&o&&(n=!0),n&&d&&!o&&(n=!1),d&&!o){n=!1;break}if(!d&&o){n=!0;break}}var r;n?t.call():e.call()}var b;b=f,n.subscribe(r,b),c(),function(t){n.subscribe(o,t),u()}(f)},getBreakpointLabels:function(){return i},setDebugMode:function(t){a=t}}}(),r=function(){var t={},e=!1;function i(e,n){if(void 0!==t[e])throw Error("Astral.context: State already initialized");t[e]=null,a("State: "+e+"\nValue: "+n+"\nAction: Initialized"),r(e,n)}function r(e,r){void 0===t[e]&&i(e,null);var o=t[e];t[e]=r,a("State: "+e+"\nValue: "+r+"\nAction: Updated"),n.publish("ASTRAL_CONTEXT_UPDATED_INTERNAL_"+e,{prevState:o,newState:t[e]})}function o(t){return function(e){n.subscribe("ASTRAL_CONTEXT_UPDATED_INTERNAL_"+t,(function(t){e.call(null,t.prevState,t.newState)}))}}function a(t){e&&console.debug("Astral.context $:",t)}return{getState:function(e){void 0===t[e]&&i(e,null);var n=new o(e);return{value:t[e],onchange:n}},updateState:r,setDebugMode:function(t){e=t}}}(),o={event:n,layout:i,context:r};return e})()));
//# sourceMappingURL=astral.min.js.map
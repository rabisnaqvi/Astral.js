!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Astral=t():e.Astral=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{context:()=>r,default:()=>o,event:()=>n,layout:()=>i});const n=function(){const e={};let t=!1;function n(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function i(e){t&&console.debug("Astral.event $:",e)}return{subscribe:function(t,n){Array.isArray(e[t])||(e[t]=[],i("Event: "+t+" subcribers list initialized")),-1===e[t].indexOf(n)&&(e[t].push(n),i("Event: "+t))},publish:function(t,n){Array.isArray(e[t])?e[t].forEach((function(e){e(n),i("Event: "+t+"\nData: "+JSON.stringify(n))})):i("Event: "+t+"\nData: "+JSON.stringify(n)+"\nAction: No subscribers found")},unsubscribe:function(t,r){if(Array.isArray(e[t])){for(var o=0;o<e[t].length;o++)e[t][o]===r&&n(e[t],r);i("Event: "+t)}else i("Event: "+t+" | No subscribers found to unsubscribe")},unsubscribeAll:function(t){if(Array.isArray(e[t])){for(var r=0;r<e[t].length;r++)n(e[t],e[t][r]);i("Event: "+t+"\nAction: All callbacks removed (unsubscribed)")}else{for(var o in e)n(e[o],e[o]);i("Removed all subscriptions because no event name was given to unsubscribeAll function")}},setDebugMode:function(e){t=e,i("Debug mode set to: "+e)}}}(),i=function(){const e={ExtraLarge:"ExtraLarge",Large:"Large",Medium:"Medium",Small:"Small",ExtraSmall:"ExtraSmall",Other:"Other"};let t={breakpoints:{[e.ExtraLarge]:{minWidth:1920,maxWidth:1/0,minHeight:840},[e.Large]:{minWidth:1280,maxWidth:1920,minHeight:646},[e.Medium]:{minWidth:960,maxWidth:1280,minHeight:380},[e.Small]:{minWidth:600,maxWidth:960,minHeight:0},[e.ExtraSmall]:{minWidth:0,maxWidth:600,minHeight:0},[e.Other]:{minWidth:600,maxWidth:1/0,minHeight:0}}},i=e;const r="astralInternalScreenResizeEvent",o="astralInternalOrientationChangeEvent";let a=!1;function c(){n.publish(r,d(u()))}function s(){n.publish(o,f())}function u(){const e=window;return{WIDTH:e.innerWidth,HEIGHT:e.innerHeight}}function l(e){const n=t.breakpoints[e];if(n)return n;throw new Error("Astral: No breakpoint found for label: "+e)}function d(e){let n;for(const i in t.breakpoints){const r=t.breakpoints[i];if(e.WIDTH>=r.minWidth&&e.WIDTH<=r.maxWidth&&e.HEIGHT>=r.minHeight)return n=r,n}if(n)return n;throw new Error("Astral: No breakpoint found for screen size: "+e.WIDTH+"x"+e.HEIGHT)}function f(){const e=window;return e.screen&&e.screen.orientation?e.screen.orientation.type:e.matchMedia?e.matchMedia("(orientation: portrait)").matches?"portrait":"landscape":null}return function(){const e=window;if(e.addEventListener("resize",c),e.screen&&e.screen.orientation)e.screen.orientation.addEventListener("change",s);else if(e.matchMedia){const t=e.matchMedia("(orientation: portrait)");s(),t.addListener((function(){s()}))}}(),{config:function(e){if(!e||!e.breakpoints)throw new Error("Astral.layout: Invalid configuration");t=e,i=Object.keys(t.breakpoints).reduce(((e,t)=>(e[t]=t,e)),{})},getWindowSize:u,getOrientation:f,getBreakpoint:d,getBreakpointFromLabel:l,applyIf:function(e,t,i,d){if(!i||0===i.length||!e)throw new Error("Astral: No conditions or callbackSuccess provided");function f(n){let r=!1;for(let e=0;e<i.length;e++){let t=i[e],c=!1;if("object"==typeof t){const e=l(t.breakpoint),i=u();switch(t.selector){case"<=":i.WIDTH<=e.maxWidth&&(c=!0);break;case">=":i.WIDTH>=e.minWidth&&(c=!0);break;case"<":i.WIDTH<e.maxWidth&&(c=!0);break;case">":i.WIDTH>e.minWidth&&(c=!0);break;default:n==e&&(c=!0)}}if("function"==typeof t&&(c=t.call()),o=`Condition ${e} matched: ${c}`,a&&console.debug(`Astral.layout $: ${o}`),c&&(r=!0),r&&d&&c&&(r=!0),r&&d&&!c&&(r=!1),d&&!c){r=!1;break}if(!d&&c){r=!0;break}}var o;r?e.call():t.call()}var b;b=f,n.subscribe(r,b),c(),function(e){n.subscribe(o,e),s()}(f)},getBreakpointLabels:function(){return i},setDebugMode:function(e){a=e}}}(),r=function(){var e={},t=!1;function i(t,n){if(void 0!==e[t])throw Error("State already initialized");e[t]=null,a("State: "+t+"\nValue: "+n+"\nAction: Initialized"),r(t,n)}function r(t,r){void 0===e[t]&&i(t,null);var o=e[t];e[t]=r,a("State: "+t+"\nValue: "+r+"\nAction: Updated"),n.publish("ASTRAL_CONTEXT_UPDATED_INTERNAL_"+t,{prevState:o,newState:e[t]})}function o(e){return function(t){n.subscribe("ASTRAL_CONTEXT_UPDATED_INTERNAL_"+e,(function(e){t.call(null,e.prevState,e.newState)}))}}function a(e){t&&console.debug("Astral.context $:",e)}return{getState:function(t){void 0===e[t]&&i(t,null);var n=new o(t);return{value:e[t],onchange:n}},updateState:r,setDebugMode:function(e){t=e}}}(),o={event:n,layout:i,context:r};return t})()));
//# sourceMappingURL=astral.min.js.map